<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>سلة التسوق - Dark shop</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <style>
        /* CSS خاص بالسلة */
        .cart-container {
            max-width: 1000px;
            margin: 40px auto;
            padding: 20px;
            background-color: rgb(70, 70, 194);
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 12px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: blue;
        }

        img {
            border-radius: 8px;
        }

        input.quantity-input {
            width: 60px;
            padding: 5px;
            border-radius: 6px;
            border: 1px solid #ccc;
            text-align: center;
        }

        button {
            padding: 8px 15px;
            border: none;
            border-radius: 8px;
            background-color: #2c3e50;
            color: #fff;
            cursor: pointer;
        }

        button:hover {
            background-color: #34495e;
        }

        .cart-summary {
            margin-top: 20px;
            text-align: right;
            font-size: 18px;
        }

        .cart-summary h3 {
            margin-bottom: 10px;
        }

        #checkout-btn {
            background-color: #27ae60;
        }

        #checkout-btn:hover {
            background-color: #2ecc71;
        }

        .cart-hero {
            text-align: center;
            margin-top: 30px;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

<!-- الهيدر -->
<header class="top-header">
    <div class="logo">Dark shop</div>
    <div class="addProduct">
        <a href="/addProduct.html">إضافة منتج 🛠️</a>
    </div>
    <div class="search-bar">
        <input type="text" placeholder="ابحث عن منتجات، علامات تجارية والمزيد...">
        <button>بحث</button>
    </div>
    <div class="header-icons">
        <a href="#">الحساب</a>
        <a href="#">الطلبات</a>
        <div id="count">
            🛒 <span id="counter">0</span>
            <a href="/cart.html">السلة</a>
        </div>
    </div>
</header>

<!-- عنوان الصفحة -->
<section class="cart-hero">
    <h1>سلة التسوق الخاصة بك</h1>
    <p>تأكد من منتجاتك قبل إتمام الطلب</p>
</section>

<!-- سلة المنتجات -->
<section class="cart-container">
    <table id="cart-table">
        <thead>
            <tr>
                <th>صورة المنتج</th>
                <th>اسم المنتج</th>
                <th>السعر</th>
                <th>الكمية</th>
                <th>الإجمالي</th>
                <th>حذف</th>
            </tr>
        </thead>
        <tbody id="cart-items">
            <!-- سيتم إضافة المنتجات بالـJS -->
        </tbody>
    </table>

    <div class="cart-summary">
        <h3>إجمالي السلة: <span id="cart-total">0</span> جنيه</h3>
        <button id="checkout-btn">إتمام الشراء</button>
    </div>
</section>

<!-- فوتر -->
<footer>
    <div class="footer-top">
        <div class="footer-section">
            <h4>عن Dark shop</h4>
            <a href="#">من نحن</a>
            <a href="#">انضم إلينا</a>
            <a href="#">المدونة</a>
            <a href="#">تواصل معنا</a>
        </div>
        <div class="footer-section">
            <h4>خدمة العملاء</h4>
            <a href="#">مساعدة</a>
            <a href="#">الأسئلة الشائعة</a>
            <a href="#">سياسة الإرجاع</a>
            <a href="#">طرق الدفع</a>
        </div>
        <div class="footer-section">
            <h4>حسابك</h4>
            <a href="#">تسجيل الدخول</a>
            <a href="#">طلباتي</a>
            <a href="#">المفضلة</a>
            <a href="#">العناوين</a>
        </div>
        <div class="footer-section">
            <h4>سياسات</h4>
            <a href="#">الشروط والأحكام</a>
            <a href="#">سياسة الخصوصية</a>
            <a href="#">الأمان والبيانات</a>
        </div>
    </div>
</footer>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];

const cartItemsContainer = document.getElementById('cart-items');
const cartTotal = document.getElementById('cart-total');
const counter = document.getElementById('counter');

function renderCart() {
    cartItemsContainer.innerHTML = '';
    let total = 0;

    cart.forEach((item, index) => {
        const itemTotal = item.price * item.quantity;
        total += itemTotal;

        cartItemsContainer.innerHTML += `
            <tr>
                <td><img src="${item.image}" alt="${item.name}" width="50"></td>
                <td>${item.name}</td>
                <td>${item.price}</td>
                <td>
                    <input type="number" min="1" value="${item.quantity}" data-index="${index}" class="quantity-input">
                </td>
                <td>${itemTotal}</td>
                <td><button data-index="${index}" class="remove-btn">حذف</button></td>
            </tr>
        `;
    });

    cartTotal.textContent = total;
    counter.textContent = cart.reduce((acc, item) => acc + item.quantity, 0);
    attachEvents();
}

function attachEvents() {
    document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            const index = e.target.dataset.index;
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    document.querySelectorAll('.quantity-input').forEach(input => {
        input.addEventListener('change', (e) => {
            const index = e.target.dataset.index;
            cart[index].quantity = parseInt(e.target.value);
            localStorage.setItem('cart', JSON.stringify(cart));
            renderCart();
        });
    });

    document.getElementById('checkout-btn').addEventListener('click', () => {
        if(cart.length === 0){
            alert("السلة فارغة!");
            return;
        }
        alert("تم إتمام الشراء بنجاح!");
        cart = [];
        localStorage.setItem('cart', JSON.stringify(cart));
        renderCart();
    });
}

renderCart();
</script>
</body>
</html>
