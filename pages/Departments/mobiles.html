<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุณู ุงูููุจุงููุงุช - Dark Shop</title>
  <link rel="stylesheet" href="/assets/css/style.css">
</head>
<body>

  <!-- ุงูููุฏุฑ -->
  <header class="top-header">
    <div class="logo">Dark shop</div>
    <a href="/index.html" class="home"></a>

    <div class="addProduct" id="addProductContainer" style="display:none;">
      <a href="/addProduct.html">ุฅุถุงูุฉ ููุชุฌ ๐๏ธ</a>
    </div>

    <div class="search-bar">
      <input type="text" id="searchInput" placeholder="ุงุจุญุซ ุนู ููุจุงูู...">
      <button id="searchBtn">ุจุญุซ</button>
    </div>

    <div class="header-icons">
      <a href="/index.html">ุงูุฑุฆูุณูุฉ</a>
      <a href="/account.html">ุงูุญุณุงุจ</a>
      <a href="#">ุงูุทูุจุงุช</a>
      <div id="count">
        ๐ <span id="counter">0</span>
        <a href="/chart.html">ุงูุณูุฉ</a>
      </div>
    </div>
  </header>

  <!-- ุงูุฃูุณุงู -->
  <nav class="nav-bar">
    <a href="/pages/Departments/offers.html">ุงูุนุฑูุถ</a>
    <a href="/pages/Departments/electronics.html">ุงูุฅููุชุฑูููุงุช</a>
    <a href="/pages/Departments/mobiles.html" class="active">ุงูููุจุงููุงุช</a>
    <a href="/pages/Departments/fashion.html">ุงูููุถุฉ</a>
    <a href="/pages/Departments/home.html">ุงูุฃุฌูุฒุฉ ุงูููุฒููุฉ</a>
    <a href="/pages/Departments/food.html">ุงูุฃูู</a>
    <a href="#">ุงููุฒูุฏ</a>
  </nav>

  <!-- ุนููุงู ุงููุณู -->
  <section class="hero">
    <h1>ูุณู ุงูููุจุงููุงุช</h1>
    <p>ุฃุญุฏุซ ุงูููุงุชู ุงูุฐููุฉ ุจุฃูุถู ุงูุฃุณุนุงุฑ ๐ฑ</p>
  </section>

  <!-- ุงูููุชุฌุงุช -->
  <section class="products" id="productsSection">
    <p style="text-align:center; color:#aaa;">ุฌุงุฑู ุชุญููู ุงูููุชุฌุงุช...</p>
  </section>

  <!-- ุงูููุชุฑ -->
  <footer>
    <div class="footer-top">
      <div class="footer-section">
        <h4>Dark shop ุนู</h4>
        <a href="#">ูู ูุญู</a>
        <a href="#">ุงูุถู ุฅูููุง</a>
        <a href="#">ุงููุฏููุฉ</a>
        <a href="#">ุชูุงุตู ูุนูุง</a>
      </div>
      <div class="footer-section">
        <h4>ุฎุฏูุฉ ุงูุนููุงุก</h4>
        <a href="#">ูุณุงุนุฏุฉ</a>
        <a href="#">ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ</a>
        <a href="#">ุณูุงุณุฉ ุงูุฅุฑุฌุงุน</a>
        <a href="#">ุทุฑู ุงูุฏูุน</a>
      </div>
      <div class="footer-section">
        <h4>ุญุณุงุจู</h4>
        <a href="/login.html">ุชุณุฌูู ุงูุฏุฎูู</a>
        <a href="#">ุทูุจุงุชู</a>
        <a href="#">ุงูููุถูุฉ</a>
        <a href="#">ุงูุนูุงููู</a>
      </div>
      <div class="footer-section">
        <h4>ุณูุงุณุงุช</h4>
        <a href="#">ุงูุดุฑูุท ูุงูุฃุญูุงู</a>
        <a href="#">ุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a>
        <a href="#">ุงูุฃูุงู ูุงูุจูุงูุงุช</a>
      </div>
    </div>

    <div class="footer-bottom">
      <p>ุชุงุจุนูุง ุนูู</p>
      <div class="social-links">
        <a href="#">ููุณุจูู</a>
        <a href="#">ุฅูุณุชุฌุฑุงู</a>
        <a href="#">ุชููุชุฑ</a>
        <a href="#">ููุชููุจ</a>
      </div>
      <p class="copy">ยฉ 2025 Dark Shop - ุฌููุน ุงูุญููู ูุญููุธุฉ</p>
    </div>
  </footer>

  <!-- ุณูุฑุจุช ุนุฑุถ ุงูููุชุฌุงุช ูุฅุถุงูุฉ ููุณูุฉ -->
  <script>
    const productsSection = document.getElementById("productsSection");
    const products = JSON.parse(localStorage.getItem("products")) || [];
    let cart = JSON.parse(localStorage.getItem("cart")) || [];

    function updateCartCounter() {
      const counter = document.getElementById("counter");
      if (counter) counter.textContent = cart.reduce((sum, item) => sum + item.quantity, 0);
    }

    function displayMobiles() {
      productsSection.innerHTML = "";

      const mobiles = products.filter(p => p.section === "ุงูููุจุงููุงุช");

      if (mobiles.length === 0) {
        productsSection.innerHTML = "<p style='text-align:center; color:#ccc;'>ูุง ุชูุฌุฏ ููุชุฌุงุช ููุจุงููุงุช ุญุงููุงู.</p>";
        return;
      }

      mobiles.forEach((p, index) => {
        const card = document.createElement("div");
        card.classList.add("product-card");
        card.innerHTML = `
          <img src="${p.image}" alt="${p.name}">
          <h4>${p.name}</h4>
          <p>ุงูุณุนุฑ: ${p.price} ุฌููู</p>
          <button class="buy" data-index="${index}" data-section="${p.section}">ุฃุถู ุฅูู ุงูุณูุฉ ๐</button>
        `;
        productsSection.appendChild(card);
      });

      bindAddToCartButtons();
    }

    function bindAddToCartButtons() {
      document.querySelectorAll(".buy").forEach(btn => {
        btn.addEventListener("click", e => {
          const sectionName = e.target.dataset.section;
          const productIndex = parseInt(e.target.dataset.index);

          const filteredProducts = products.filter(p => p.section === sectionName);
          const selectedProduct = filteredProducts[productIndex];

          if (!selectedProduct) return alert("โ ุงูููุชุฌ ุบูุฑ ููุฌูุฏ!");

          const existing = cart.find(item => item.name === selectedProduct.name && item.section === selectedProduct.section);
          if (existing) {
            existing.quantity += 1;
          } else {
            cart.push({ ...selectedProduct, quantity: 1 });
          }

          localStorage.setItem("cart", JSON.stringify(cart));
          updateCartCounter();
        });
      });
    }

    displayMobiles();
    updateCartCounter();
  </script>

</body>
</html>
